"use strict";var _prototypeProperties=function(t,n,e){n&&Object.defineProperties(t,n),e&&Object.defineProperties(t.prototype,e)},_classCallCheck=function(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")},Promise=function(){function t(n){var e=void 0===arguments[1]?!0:arguments[1];if(_classCallCheck(this,t),this.OnSuccess=[],this.OnError=[],this.Result=[],this.Status=0,"function"==typeof n)try{e?setTimeout(n.call(this,this.resolve.bind(this),this.reject.bind(this)),0):n.call(this,this.resolve.bind(this),this.reject.bind(this))}catch(i){this.reject(i)}}return _prototypeProperties(t,{resolve:{value:function(n){return new t(function(t){t(n)})},writable:!0,configurable:!0},reject:{value:function(n){return new t(function(t,e){e(n)})},writable:!0,configurable:!0},all:{value:function(n){return new t(function(e,i){var r=[],s=[],u=!1;n.forEach(function(n){var o;n instanceof t&&(r.push(n),o=r.indexOf(n),s.push(null),n.then(function(t){s[o]=t,r.splice(r.indexOf(n),1),0!==r.length||u||(u=!0,e(s))})["catch"](function(t){u||(u=!0,i(t))}))}),r.length||e()})},writable:!0,configurable:!0}},{then:{value:function(n,e){return new t(function(i){if("function"==typeof n){var r=function(){var e=n.apply(null,arguments);e instanceof t?e.then(i):i.apply(null,arguments)};1===this.Status?r.apply(null,this.Result):0===this.Status&&this.OnSuccess.push(r)}"function"==typeof e&&this["catch"](e)}.bind(this))},writable:!0,configurable:!0},"catch":{value:function(t){"function"==typeof t&&(2===this.Status?t.apply(null,this.Result):0===this.Status&&this.OnError.push(t))},writable:!0,configurable:!0},resolve:{value:function(){this.Status=1;var t=arguments;this.Result=t,this.OnSuccess.forEach(function(n){n.apply(null,t)})},writable:!0,configurable:!0},reject:{value:function(){var t=arguments;if(this.Result=t,this.Status=2,!this.OnError.length)throw new Error("Uncaught Promise Rejection");this.OnError.forEach(function(n){n.apply(null,t)})},writable:!0,configurable:!0}}),t}();module.exports=Promise;