"use strict";var _prototypeProperties=function(e,t,i){t&&Object.defineProperties(e,t),i&&Object.defineProperties(e.prototype,i)},_classCallCheck=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")},Promise=function(){function e(t){if(_classCallCheck(this,e),"undefined"===this)throw new Error("No direct access, must be initialized like a class");this.OnSuccess=[],this.OnError=[],this.Result=[],this.Fulfilled=0,"function"==typeof t&&setTimeout(function(){try{t.call(this,this.resolve.bind(this),this.reject.bind(this))}catch(e){if(!this.OnError.length)throw e;this.reject(e)}}.bind(this),0)}return _prototypeProperties(e,{resolve:{value:function(t){return new e(function(e){e(t)})},writable:!0,configurable:!0},reject:{value:function(t){return new e(function(e,i){i(t)})},writable:!0,configurable:!0},all:{value:function(t){return new e(function(i,n){var r=[],l=[],s=!1;t.forEach(function(t){var u;t instanceof e&&(r.push(t),u=r.indexOf(t),l.push(null),t.then(function(e){l[u]=e,r.splice(r.indexOf(t),1),0!==r.length||s||(s=!0,i(l))})["catch"](function(e){s||(s=!0,n(e))}))}),r.length||i()})},writable:!0,configurable:!0}},{then:{value:function(t,i){var n=new e,r=null,l=null;return"function"==typeof t&&(r=function(e){n.resolve(t(e))},0===this.Fulfilled?this.OnSuccess.push(r):1===this.Fulfilled&&r(this.Result)),"function"==typeof i&&(l=function(e){i(e),n.reject(e)},0===this.Fulfilled?this.OnError.push(l):2===this.Fulfilled&&l(this.Result)),n},writable:!0,configurable:!0},"catch":{value:function(e){return"function"==typeof e&&(2===this.Fulfilled?e.apply(null,this.Result):0===this.Fulfilled&&this.OnError.push(e)),this},writable:!0,configurable:!0},resolve:{value:function(){if(0!==this.Fulfilled)throw new Error("Promise has already been processed");this.Fulfilled=1;var e=arguments;return this.Result=e,this.OnSuccess.forEach(function(t){t.apply(null,e)}),this},writable:!0,configurable:!0},reject:{value:function(){if(0!==this.Fulfilled)throw new Error("Promise has already been processed");var e=arguments;return this.Result=e,this.Fulfilled=2,this.OnError.forEach(function(t){t.apply(null,e)}),this},writable:!0,configurable:!0}}),e}();module.exports=Promise;